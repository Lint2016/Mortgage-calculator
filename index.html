<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
    <link rel="shortcut icon" href="MortgagePictures/mortgagepic.png" type="image/x-icon">
    <title>Mortgage Calculator</title>
</head>
<body>
    <!-- Dark mode toggle -->
    <div class="theme-switch-wrapper">
        <label class="theme-switch" for="checkbox">
            <input type="checkbox" id="checkbox" />
            <div class="slider"></div>
        </label>
    </div>

    <div class="container glass-effect">
        <h1>Mortgage Calculator</h1>
        <form id="mortgage">
            <main class="row">
                <div class="input-field">
                    <input type="number" id="homeValue" required>
                    <label for="homeValue">Home Value</label>
                </div>

                <div class="input-field">
                    <input type="number" id="downPayment" required>
                    <label for="downPayment">Down Payment</label>
                </div>

                <div class="input-field">
                    <label for="loanAmount">Loan Amount</label>
                    <div class="currency-input">
                        <select id="currency" class="currency-select">
                            <option value="ZAR">ZAR</option>
                            <option value="USD">USD</option>
                            <option value="EUR">EUR</option>
                            <option value="GBP">GBP</option>
                            <option value="AUD">AUD</option>
                            <option value="CAD">CAD</option>
                        </select>
                        <input type="number" id="loanAmount" readonly>
                    </div>
                </div>

                <div class="input-field">
                    <input type="text" id="interestRate" required>
                    <label for="interestRate">Interest Rate (%)</label>
                </div>

                <div class="input-field">
                    <input type="number" id="loanDuration" required>
                    <label for="loanDuration">Loan Duration (years)</label>
                </div>

                <div class="input-field">
                    <input type="number" id="extraPayment" placeholder="Optional">
                    <label for="extraPayment">Extra Monthly Payment</label>
                </div>
            </main>

            <footer class="text-center">
                <button class="btn calculate-btn" type="submit">Calculate</button>
                <button class="btn blue result-btn" type="button">
                    Monthly Payment: <span id="monthlyPayment"></span>
                </button>
            </footer>
        </form>

        <!-- Results Section -->
        <div class="results-section" style="display: none;">
            <h2>Loan Summary</h2>
            <div class="summary-grid">
                <div class="summary-item">
                    <h3>Total Payment</h3>
                    <p id="totalPayment">ZAR 0</p>
                </div>
                <div class="summary-item">
                    <h3>Total Interest</h3>
                    <p id="totalInterest">ZAR 0</p>
                </div>
                <div class="summary-item">
                    <h3>Payoff Date</h3>
                    <p id="payoffDate">-</p>
                </div>
                <div class="summary-item">
                    <h3>Interest Savings</h3>
                    <p id="interestSavings">ZAR 0</p>
                </div>
            </div>

            <!-- Amortization Schedule -->
            <div class="amortization-section">
                <h2>Amortization Schedule</h2>
                <div class="schedule-controls">
                    <button class="btn schedule-btn" onclick="toggleSchedule()">Show Schedule</button>
                    <button class="btn download-btn" onclick="downloadSchedule()">Download PDF</button>
                </div>
                <div class="schedule-table" style="display: none;">
                    <table>
                        <thead>
                            <tr>
                                <th>Payment #</th>
                                <th>Payment</th>
                                <th>Principal</th>
                                <th>Interest</th>
                                <th>Remaining Balance</th>
                            </tr>
                        </thead>
                        <tbody id="amortizationBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="copyright">
        <p>&copy; 2024 Louis Kapend. All rights reserved.</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="mortgage.js"></script>
</body>
</html>